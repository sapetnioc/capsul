
<!DOCTYPE html>

<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta charset="utf-8" />
  
    <title>CAPSUL &#8212; CAPSUL - Chain algorithm in pipelines and execute in many contexts</title>
  <!-- htmltitle is before nature.css - we use this hack to load bootstrap first -->
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <link rel="stylesheet" href="../_static/css/bootstrap.min.css" media="screen" />
  <link rel="stylesheet" href="../_static/css/bootstrap-responsive.css"/>
  <link rel="icon" href="../_static/capsul_logo.svg"/>

    <link rel="stylesheet" href="../_static/custom.css" type="text/css" />
    <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />
    <link rel="stylesheet" type="text/css" href="../_static/graphviz.css" />
    
    <script type="text/javascript" id="documentation_options" data-url_root="../" src="../_static/documentation_options.js"></script>
    <script type="text/javascript" src="../_static/jquery.js"></script>
    <script type="text/javascript" src="../_static/underscore.js"></script>
    <script type="text/javascript" src="../_static/doctools.js"></script>
    <script type="text/javascript" src="../_static/language_data.js"></script>
    <script crossorigin="anonymous" integrity="sha256-Ae2Vz/4ePdIu6ZyI/5ZGsYnb+m0JlOmKPjt6XZ9JJkA=" type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/require.js/2.3.4/require.min.js"></script>
    
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />

  <!-- sidebar -->
  
   
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <script src="../_static/js/bootstrap.min.js" type="application/javascript"></script>

  <script type="application/javascript">
    $("div.buttonNext, div.buttonPrevious").hover(
       function () {
           $(this).css('background-color', '#FF9C34');
       },
       function () {
           $(this).css('background-color', '#A7D6E2');
       }
    );
    var bodywrapper = $('.bodywrapper');
    var sidebarbutton = $('#sidebarbutton');
    sidebarbutton.css({'height': '900px'});
  </script>

  <div class="header" style="display: inline; width: 80%; margin-left:10%;">
    <a href="../index.html">
    <img src="../_static/capsul_logo.svg" alt="Capsul logo" style="display: inline; height:4em;"/>
    </a >
    <div class="navbar" style="display: inline;">
      <ul>
        <li><a href="../index.html">Home</a></li>
        <li><a href="../installation.html">Installation</a></li>
        <li class="btn-li">
          <div class="btn-group">
            <a href="../documentation.html">Documentation</a>
            <a class="btn dropdown-toggle" data-toggle="dropdown">
              <span class="caret"></span>
            </a>
            <ul class="dropdown-menu">
              <li class="link-title">CAPSUL</li>
              <li><a href="../user_guide_tree/index.html">User guide</a></li>
              <li><a href="index.html">API</a></li>
            </ul>
          </div>
        </li>
        <li>
          <!-- form action="search.html" method="get" style="display: inline-block;"></form>
            <input type="text" class="search-header" name="q" placeholder="search documentation..." value=""></input>
            <button type="submit" >search</button>
          </form -->
          <form class="search_box" method="get" action="http://www.google.com/search" style="display: inline-block;">
            <input class="search-header" type="text" name="q" placeholder="search documentation..." />
            <input class="submit" type="image" src="../_static/find_read.png" value="Search" />
            <input type="hidden" name="sitesearch" value="brainvisa.info/capsul" />
          </form>
        </li>
      </ul>
    </div> <!-- end navbar -->
  </div>


  </head><body>
    <div class="related" role="navigation" aria-label="related navigation">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="../genindex.html" title="General Index"
             accesskey="I">index</a></li>
        <li class="right" >
          <a href="../py-modindex.html" title="Python Module Index"
             >modules</a> |</li>
        <li class="nav-item nav-item-0"><a href="../index.html">CAPSUL</a> &#187;</li> 
      </ul>
    </div>  

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          <div class="body" role="main">
            
  <div class="section" id="capsul-engine-module">
<h1>capsul.engine module<a class="headerlink" href="#capsul-engine-module" title="Permalink to this headline">¶</a></h1>
<div class="graphviz"><img src="../_images/inheritance-2074abff3e40ee0129762b70af031c22b7aefff7.png" alt="Inheritance diagram of capsul.engine, capsul.engine.database_json, capsul.engine.database_populse, capsul.engine.database, capsul.engine.module" usemap="#inheritance8def285678" class="inheritance graphviz" /></div>
<map id="inheritance8def285678" name="inheritance8def285678">
<area shape="rect" id="node2" href="#capsul.engine.CapsulEngine" target="_top" title="A CapsulEngine is the mandatory entry point of all software using Capsul. It contains objects to store configuration and metadata, define execution environment(s) (possibly remote) and perform pipelines execution." alt="" coords="495,104,603,129"/>
<area shape="rect" id="node5" href="#capsul.engine.database.DatabaseEngine" target="_top" title="A :py:class:`DatabaseEngine` is the base class for all engines " alt="" coords="5,31,132,56"/>
<area shape="rect" id="node6" href="#capsul.engine.database_json.JSONDBEngine" target="_top" title="A JSON dictionary implementation of :py:class:`capsul.engine.database.DatabaseEngine`" alt="" coords="189,5,305,31"/>
<area shape="rect" id="node7" href="#capsul.engine.database_populse.PopulseDBEngine" target="_top" title="PopulseDBEngine" alt="" coords="180,55,315,80"/>
</map><div class="section" id="module-capsul.engine">
<span id="main-module"></span><h2>Main module<a class="headerlink" href="#module-capsul.engine" title="Permalink to this headline">¶</a></h2>
<p>This module defines the main API to interact with Capsul processes.
In order to execute a process, it is mandatory to have an instance of
<a class="reference internal" href="#capsul.engine.CapsulEngine" title="capsul.engine.CapsulEngine"><code class="xref py py-class docutils literal notranslate"><span class="pre">CapsulEngine</span></code></a>. Such an instance can be created with factory
<a class="reference internal" href="#capsul.engine.capsul_engine" title="capsul.engine.capsul_engine"><code class="xref py py-func docutils literal notranslate"><span class="pre">capsul_engine()</span></code></a></p>
<div class="section" id="classes">
<h3>Classes<a class="headerlink" href="#classes" title="Permalink to this headline">¶</a></h3>
<div class="section" id="capsulengine">
<h4><a class="reference internal" href="#capsul.engine.CapsulEngine" title="capsul.engine.CapsulEngine"><code class="xref py py-class docutils literal notranslate"><span class="pre">CapsulEngine</span></code></a><a class="headerlink" href="#capsulengine" title="Permalink to this headline">¶</a></h4>
</div>
</div>
<div class="section" id="functions">
<h3>Functions<a class="headerlink" href="#functions" title="Permalink to this headline">¶</a></h3>
<div class="section" id="database-factory">
<h4><a class="reference internal" href="#capsul.engine.database_factory" title="capsul.engine.database_factory"><code class="xref py py-func docutils literal notranslate"><span class="pre">database_factory()</span></code></a><a class="headerlink" href="#database-factory" title="Permalink to this headline">¶</a></h4>
</div>
<div class="section" id="capsul-engine">
<h4><a class="reference internal" href="#capsul.engine.capsul_engine" title="capsul.engine.capsul_engine"><code class="xref py py-func docutils literal notranslate"><span class="pre">capsul_engine()</span></code></a><a class="headerlink" href="#capsul-engine" title="Permalink to this headline">¶</a></h4>
<dl class="class">
<dt id="capsul.engine.CapsulEngine">
<em class="property">class </em><code class="sig-prename descclassname">capsul.engine.</code><code class="sig-name descname">CapsulEngine</code><span class="sig-paren">(</span><em class="sig-param">self</em>, <em class="sig-param">database_location</em>, <em class="sig-param">database</em>, <em class="sig-param">config=None</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/capsul/engine.html#CapsulEngine"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#capsul.engine.CapsulEngine" title="Permalink to this definition">¶</a></dt>
<dd><p>A CapsulEngine is the mandatory entry point of all software using Capsul. It contains objects to store configuration and metadata, define execution environment(s) (possibly remote) and perform pipelines execution.</p>
<p>A CapsulEngine must be created using capsul.engine.capsul_engine function. For instance:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">capsul.engine</span> <span class="k">import</span> <span class="n">capsul_engine</span>
<span class="n">ce</span> <span class="o">=</span> <span class="n">capsul_engine</span><span class="p">()</span>
</pre></div>
</div>
<p>Or:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">capsul.api</span> <span class="k">import</span> <span class="n">capsul_engine</span>
<span class="n">ce</span> <span class="o">=</span> <span class="n">capsul_engine</span><span class="p">()</span>
</pre></div>
</div>
<p>By default, CapsulEngine only store necessary configuration. But it may be necessary to modify Python environment globally to apply this configuration. For instance, Nipype must be configured globally. If SPM is configured in CapsulEngine, it is necessary to explicitely activate the configuration in order to modify the global configuration of Nipype for SPM. This activation is done by explicitely activating the execution context of the capsul engine with the following code:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">capsul.engine</span> <span class="k">import</span> <span class="n">capsul_engine</span>
<span class="n">ce</span> <span class="o">=</span> <span class="n">capsul_engine</span><span class="p">()</span>
<span class="c1"># Nipype is not configured here</span>
<span class="k">with</span> <span class="n">ce</span><span class="p">:</span>
    <span class="c1"># Nipype is configured here</span>
<span class="c1"># Nipype may not be configured here</span>
</pre></div>
</div>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>CapsulEngine is the replacement of the older <a class="reference internal" href="study_config.html#capsul.study_config.study_config.StudyConfig" title="capsul.study_config.study_config.StudyConfig"><code class="xref py py-class docutils literal notranslate"><span class="pre">StudyConfig</span></code></a>, which is still present in Capsul 2.2 for backward compatibility, but will disapear in later versions. In Capsul 2.2 both objects exist, and are syn chronized internally, which means that a StudyConfig object wille also ceate a CapsulEngine, and the other way, and modifications in the StudyConfig object will change the corresponding item in CapsulEngine and vice versa. Functionalities of StudyConfig are moving internally to CapsulEngine, StudyConfig being merely a wrapper.</p>
</div>
<p><strong>Using CapsulEngine</strong></p>
<p>It is used to store configuration variables, and to handle execution within the configured context. The configuration has 2 independent axes: configuration modules, which provide additional configutation variables, and computing resources.</p>
<p><em>Computing resources</em></p>
<p>Capsul is using <a class="reference external" href="http://brainvisa.info/soma-workflow/sphinx/index.html">Soma-Workflow</a> to run processes, and is thus able to connect and execute on a remote computing server. The remote computing resource may have a different configuration from the client one (paths for software or data, available external software etc). So configurations specific to different computing resources should be handled in CapsulEngine. For this, the configuration section is split into several configuration instances, one for each computing resource.</p>
<p>As this is a little bit complex to handle at first, a “global” configuraiton is used to maintain all common configuration options. It is typically used to work on the local machine, especially for users who only work locally. This configuration object is found under the <code class="docutils literal notranslate"><span class="pre">global_config</span></code> object in a CapsulEngine instance. It is a <a class="reference external" href="http://brainvisa.info/soma-base/sphinx/api.html#soma.controller.controller.Controller" title="(in Soma-base v4.6)"><code class="xref py py-class docutils literal notranslate"><span class="pre">Controller</span></code></a> object:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">capsul.api</span> <span class="k">import</span> <span class="n">capsul_engine</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">ce</span> <span class="o">=</span> <span class="n">capsul_engine</span><span class="p">()</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">config</span> <span class="o">=</span> <span class="n">ce</span><span class="o">.</span><span class="n">global_config</span>
<span class="gp">&gt;&gt;&gt; </span><span class="nb">print</span><span class="p">(</span><span class="n">config</span><span class="o">.</span><span class="n">export_to_dict</span><span class="p">())</span>
<span class="go">OrderedDict([(&#39;fsl&#39;, OrderedDict([(&#39;config&#39;, &lt;undefined&gt;), (&#39;directory&#39;, &lt;undefined&gt;), (&#39;prefix&#39;, &lt;undefined&gt;), (&#39;use&#39;, &lt;undefined&gt;)])), (&#39;matlab&#39;, OrderedDict([(&#39;executable&#39;, &lt;undefined&gt;)])), (&#39;spm&#39;, OrderedDict([(&#39;directory&#39;, &lt;undefined&gt;), (&#39;standalone&#39;, &lt;undefined&gt;), (&#39;use&#39;, &lt;undefined&gt;), (&#39;version&#39;, &lt;undefined&gt;)])), (&#39;axon&#39;, OrderedDict([(&#39;shared_directory&#39;, &lt;undefined&gt;)])), (&#39;attributes&#39;, OrderedDict([(&#39;attributes_schema_paths&#39;, [u&#39;capsul.attributes.completion_engine_factory&#39;]), (&#39;attributes_schemas&#39;, OrderedDict()), (&#39;path_completion&#39;, &lt;undefined&gt;), (&#39;process_completion&#39;, &#39;builtin&#39;)]))])</span>
</pre></div>
</div>
<p>Whenever a new computing resource is used, it can be added as a new configuration using <code class="xref py py-meth docutils literal notranslate"><span class="pre">add_computing_resource()</span></code>. Configuration options for this resource are a merge of the global one, and the specific ones:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">ce</span><span class="o">.</span><span class="n">add_computing_resource</span><span class="p">(</span><span class="s1">&#39;computing_server&#39;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">ce</span><span class="o">.</span><span class="n">global_config</span><span class="o">.</span><span class="n">spm</span><span class="o">.</span><span class="n">directory</span> <span class="o">=</span> <span class="s1">&#39;/tmp&#39;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="nb">print</span><span class="p">(</span><span class="n">ce</span><span class="o">.</span><span class="n">config</span><span class="p">(</span><span class="s1">&#39;spm.directory&#39;</span><span class="p">,</span> <span class="s1">&#39;computing_server&#39;</span><span class="p">)</span>
<span class="go">&#39;/tmp&#39;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">ce</span><span class="o">.</span><span class="n">set_config</span><span class="p">(</span><span class="s1">&#39;spm.directory&#39;</span><span class="p">,</span> <span class="s1">&#39;/home/myself&#39;</span><span class="p">,</span> <span class="s1">&#39;computing_server&#39;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="nb">print</span><span class="p">(</span><span class="n">ce</span><span class="o">.</span><span class="n">config</span><span class="p">(</span><span class="s1">&#39;spm.directory&#39;</span><span class="p">,</span> <span class="s1">&#39;computing_server&#39;</span><span class="p">)</span>
<span class="go">&#39;/home/myself&#39;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="nb">print</span><span class="p">(</span><span class="n">ce</span><span class="o">.</span><span class="n">config</span><span class="p">(</span><span class="s1">&#39;spm.directory&#39;</span><span class="p">)</span>
<span class="go">&#39;/tmp&#39;</span>
</pre></div>
</div>
<p><em>configuration modules</em></p>
<p>The configuration is handled through a set of configuration modules. Each is dedicated for a topic (for instance handling a specific external software paths, or managing process parameters completion,; etc). A module adds a configuration Controller, with its own variables, and is able to manage runtime configuration of programs, if needed, through environment variables. Capsul comes with a set of prefedined modules:
<a class="reference internal" href="#capsul.engine.module.attributes.AttributesConfig" title="capsul.engine.module.attributes.AttributesConfig"><code class="xref py py-class docutils literal notranslate"><span class="pre">AttributesConfig</span></code></a>,
<a class="reference internal" href="#capsul.engine.module.axon.AxonConfig" title="capsul.engine.module.axon.AxonConfig"><code class="xref py py-class docutils literal notranslate"><span class="pre">AxonConfig</span></code></a>,
<a class="reference internal" href="#capsul.engine.module.fom.FomConfig" title="capsul.engine.module.fom.FomConfig"><code class="xref py py-class docutils literal notranslate"><span class="pre">FomConfig</span></code></a>,
<code class="xref py py-class docutils literal notranslate"><span class="pre">FSLConfig</span></code>,
<code class="xref py py-class docutils literal notranslate"><span class="pre">MatlabConfig</span></code>,
<code class="xref py py-class docutils literal notranslate"><span class="pre">SPMConfig</span></code></p>
<p><strong>Methods</strong></p>
<p>The CapsulEngine constructor should not be called directly.
Use <a class="reference internal" href="#capsul.engine.capsul_engine" title="capsul.engine.capsul_engine"><code class="xref py py-func docutils literal notranslate"><span class="pre">capsul_engine()</span></code></a> factory function instead.</p>
<dl class="method">
<dt id="capsul.engine.CapsulEngine.connect">
<code class="sig-name descname">connect</code><span class="sig-paren">(</span><em class="sig-param">computing_resource</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/capsul/engine.html#CapsulEngine.connect"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#capsul.engine.CapsulEngine.connect" title="Permalink to this definition">¶</a></dt>
<dd><p>Connect the capsul engine to a computing resource</p>
</dd></dl>

<dl class="method">
<dt id="capsul.engine.CapsulEngine.connected_to">
<code class="sig-name descname">connected_to</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="../_modules/capsul/engine.html#CapsulEngine.connected_to"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#capsul.engine.CapsulEngine.connected_to" title="Permalink to this definition">¶</a></dt>
<dd><p>Return the name of the computing resource this capsul engine is
connected to or None if it is not connected.</p>
</dd></dl>

<dl class="method">
<dt id="capsul.engine.CapsulEngine.detailed_information">
<code class="sig-name descname">detailed_information</code><span class="sig-paren">(</span><em class="sig-param">execution_id</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/capsul/engine.html#CapsulEngine.detailed_information"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#capsul.engine.CapsulEngine.detailed_information" title="Permalink to this definition">¶</a></dt>
<dd><p>Return complete (and possibly big) information about a process
execution.</p>
</dd></dl>

<dl class="method">
<dt id="capsul.engine.CapsulEngine.disconnect">
<code class="sig-name descname">disconnect</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="../_modules/capsul/engine.html#CapsulEngine.disconnect"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#capsul.engine.CapsulEngine.disconnect" title="Permalink to this definition">¶</a></dt>
<dd><p>Disconnect from a computing ressource.</p>
</dd></dl>

<dl class="method">
<dt id="capsul.engine.CapsulEngine.dispose">
<code class="sig-name descname">dispose</code><span class="sig-paren">(</span><em class="sig-param">execution_id</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/capsul/engine.html#CapsulEngine.dispose"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#capsul.engine.CapsulEngine.dispose" title="Permalink to this definition">¶</a></dt>
<dd><p>Update the database with the current state of a process execution and
free the resources used in the computing resource (i.e. remove the
workflow from SomaWorkflow).</p>
</dd></dl>

<dl class="method">
<dt id="capsul.engine.CapsulEngine.environment_builder">
<code class="sig-name descname">environment_builder</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="../_modules/capsul/engine.html#CapsulEngine.environment_builder"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#capsul.engine.CapsulEngine.environment_builder" title="Permalink to this definition">¶</a></dt>
<dd><p>Return a string that contains a Python script that must be run in
the computing environment in order to define the environment variables
that must be given to all processes. The code of this script must be
executed in the processing context (i.e. on the, eventualy remote,
machine that will run the process). This code is supposed to be executed
in a new Python command and prints a JSON dictionary on standard output.
This dictionary contain environment variables that must be given to any
process using the environment of this capsul engine.</p>
</dd></dl>

<dl class="method">
<dt id="capsul.engine.CapsulEngine.executions">
<code class="sig-name descname">executions</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="../_modules/capsul/engine.html#CapsulEngine.executions"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#capsul.engine.CapsulEngine.executions" title="Permalink to this definition">¶</a></dt>
<dd><p>List the execution identifiers of all processes that have been started
but not disposed in the connected computing ressource. Raises an
exception if the computing resource is not connected.</p>
</dd></dl>

<dl class="method">
<dt id="capsul.engine.CapsulEngine.get_process_instance">
<code class="sig-name descname">get_process_instance</code><span class="sig-paren">(</span><em class="sig-param">process_or_id</em>, <em class="sig-param">**kwargs</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/capsul/engine.html#CapsulEngine.get_process_instance"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#capsul.engine.CapsulEngine.get_process_instance" title="Permalink to this definition">¶</a></dt>
<dd><p>The only official way to get a process instance is to use this method.
For now, it simply calls self.study_config.get_process_instance
but it will change in the future.</p>
</dd></dl>

<dl class="method">
<dt id="capsul.engine.CapsulEngine.interrupt">
<code class="sig-name descname">interrupt</code><span class="sig-paren">(</span><em class="sig-param">execution_id</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/capsul/engine.html#CapsulEngine.interrupt"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#capsul.engine.CapsulEngine.interrupt" title="Permalink to this definition">¶</a></dt>
<dd><p>Try to stop the execution of a process. Does not wait for the process
to be terminated.</p>
</dd></dl>

<dl class="method">
<dt id="capsul.engine.CapsulEngine.load_module">
<code class="sig-name descname">load_module</code><span class="sig-paren">(</span><em class="sig-param">module_name</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/capsul/engine.html#CapsulEngine.load_module"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#capsul.engine.CapsulEngine.load_module" title="Permalink to this definition">¶</a></dt>
<dd><p>Load a module if it has not already been loaded (is this case,
nothing is done)</p>
<p>A module is a fully qualified name of a Python module (as accepted
by Python import statement). Such a module must define the two
following functions (and may define two others, see below):</p>
<p>def load_module(capsul_engine, module_name):
def set_environ(config, environ):</p>
<p>load_module of each module is called once before reading and applying
the configuration. It can be used to add traits to the CapsulEngine
in order to define the configuration options that are used by the
module. Values of these traits are automatically stored in
configuration in database when self.save() is used, and they are
retrieved from database before initializing modules.</p>
<p>set__environ is called in the context of the processing (i.e. on
he, possibly remote, machine that runs the pipelines). It receives
the configuration as a JSON compatible dictionary (for instance a
CapsulEngine attibute <cite>capsul_engine.spm.directory</cite> would be
config[‘spm’][‘directory’]). The function must modify the environ
dictionary to set the environment variables that must be defined
for pipeline configuration. These variables are typically used by
modules in capsul.in_context module to manage running external
software with appropriate configuration.</p>
</dd></dl>

<dl class="method">
<dt id="capsul.engine.CapsulEngine.load_modules">
<code class="sig-name descname">load_modules</code><span class="sig-paren">(</span><em class="sig-param">require</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/capsul/engine.html#CapsulEngine.load_modules"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#capsul.engine.CapsulEngine.load_modules" title="Permalink to this definition">¶</a></dt>
<dd><p>Call self.load_module for each required module. The list of modules
to load is located in self.modules (if it is None,
capsul.module.default_modules is used).</p>
</dd></dl>

<dl class="method">
<dt id="capsul.engine.CapsulEngine.raise_for_status">
<code class="sig-name descname">raise_for_status</code><span class="sig-paren">(</span><em class="sig-param">status</em>, <em class="sig-param">execution_id=None</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/capsul/engine.html#CapsulEngine.raise_for_status"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#capsul.engine.CapsulEngine.raise_for_status" title="Permalink to this definition">¶</a></dt>
<dd><p>Raise an exception if a process execution failed</p>
</dd></dl>

<dl class="method">
<dt id="capsul.engine.CapsulEngine.start">
<code class="sig-name descname">start</code><span class="sig-paren">(</span><em class="sig-param">process</em>, <em class="sig-param">history=True</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/capsul/engine.html#CapsulEngine.start"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#capsul.engine.CapsulEngine.start" title="Permalink to this definition">¶</a></dt>
<dd><p>Asynchronously start the exection of a process in the connected
computing environment. Returns a string that is an identifier of the
process execution and can be used to get the status of the
execution or wait for its termination.</p>
<p>if history is True, an entry of the process execution is stored in
the database. The content of this entry is to be defined but it will
contain the process parameters (to restart the process) and will be
updated on process termination (for instance to store execution time
if possible).</p>
</dd></dl>

<dl class="method">
<dt id="capsul.engine.CapsulEngine.status">
<code class="sig-name descname">status</code><span class="sig-paren">(</span><em class="sig-param">execution_id</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/capsul/engine.html#CapsulEngine.status"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#capsul.engine.CapsulEngine.status" title="Permalink to this definition">¶</a></dt>
<dd><p>Return a simple value with the status of an execution (queued,
running, terminated, error, etc.)</p>
</dd></dl>

<dl class="method">
<dt id="capsul.engine.CapsulEngine.wait">
<code class="sig-name descname">wait</code><span class="sig-paren">(</span><em class="sig-param">execution_id</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/capsul/engine.html#CapsulEngine.wait"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#capsul.engine.CapsulEngine.wait" title="Permalink to this definition">¶</a></dt>
<dd><p>Wait for the end of a process execution (either normal termination,
interruption or error).</p>
</dd></dl>

</dd></dl>

<dl class="function">
<dt id="capsul.engine.capsul_engine">
<code class="sig-prename descclassname">capsul.engine.</code><code class="sig-name descname">capsul_engine</code><span class="sig-paren">(</span><em class="sig-param">database_location=None</em>, <em class="sig-param">require=None</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/capsul/engine.html#capsul_engine"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#capsul.engine.capsul_engine" title="Permalink to this definition">¶</a></dt>
<dd><p>User facrory for creating capsul engines.</p>
<p>If no database_location is given, the default value is
‘~/.config/capsul/capsul_engine.sqlite’ where ~ is replaced by the
current use home directory (with os.path.expanduser).</p>
<p>Configuration is read from a dictionary stored in two database entries.
The first entry has the key ‘global_config’ (i.e.
database.json_value(‘global_config’)), it contains the configuration
values that are shared by all processings engines. The secon entry is
computing_config`. It contains a dictionary with one item per computing
resource where the key is the resource name and the value is configuration
values that are specific to this computing resource.</p>
<p>Before initialization of the CapsulEngine, modules are loaded. The
list of loaded modules is searched in the ‘modules’ value in the
database (i.e. in database.json_value(‘modules’)) ; if no list is
defined in the database, capsul.module.default_modules is used.</p>
</dd></dl>

<dl class="function">
<dt id="capsul.engine.database_factory">
<code class="sig-prename descclassname">capsul.engine.</code><code class="sig-name descname">database_factory</code><span class="sig-paren">(</span><em class="sig-param">database_location</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/capsul/engine.html#database_factory"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#capsul.engine.database_factory" title="Permalink to this definition">¶</a></dt>
<dd><p>Create a DatabaseEngine from its location string. This location can be
either a sqlite file path (ending with ‘.sqlite’ or ‘:memory:’ for an
in memory database for testing) or a populse_db URL, or None.</p>
</dd></dl>

</div>
</div>
</div>
<div class="section" id="module-capsul.engine.database_json">
<span id="capsul-engine-database-json-submodule"></span><h2>capsul.engine.database_json submodule<a class="headerlink" href="#module-capsul.engine.database_json" title="Permalink to this headline">¶</a></h2>
<dl class="class">
<dt id="capsul.engine.database_json.JSONDBEngine">
<em class="property">class </em><code class="sig-prename descclassname">capsul.engine.database_json.</code><code class="sig-name descname">JSONDBEngine</code><span class="sig-paren">(</span><em class="sig-param">json_filename</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/capsul/engine/database_json.html#JSONDBEngine"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#capsul.engine.database_json.JSONDBEngine" title="Permalink to this definition">¶</a></dt>
<dd><p>A JSON dictionary implementation of <a class="reference internal" href="#capsul.engine.database.DatabaseEngine" title="capsul.engine.database.DatabaseEngine"><code class="xref py py-class docutils literal notranslate"><span class="pre">capsul.engine.database.DatabaseEngine</span></code></a></p>
<dl class="method">
<dt id="capsul.engine.database_json.JSONDBEngine.json_value">
<code class="sig-name descname">json_value</code><span class="sig-paren">(</span><em class="sig-param">name</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/capsul/engine/database_json.html#JSONDBEngine.json_value"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#capsul.engine.database_json.JSONDBEngine.json_value" title="Permalink to this definition">¶</a></dt>
<dd><p>Retrieve a value previously stored with set_json_value()</p>
</dd></dl>

<dl class="method">
<dt id="capsul.engine.database_json.JSONDBEngine.named_directories">
<code class="sig-name descname">named_directories</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="../_modules/capsul/engine/database_json.html#JSONDBEngine.named_directories"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#capsul.engine.database_json.JSONDBEngine.named_directories" title="Permalink to this definition">¶</a></dt>
<dd><p>List the names of all named directories. This method may return any
iterable value (list, generator, etc.)</p>
</dd></dl>

<dl class="method">
<dt id="capsul.engine.database_json.JSONDBEngine.named_directory">
<code class="sig-name descname">named_directory</code><span class="sig-paren">(</span><em class="sig-param">name</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/capsul/engine/database_json.html#JSONDBEngine.named_directory"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#capsul.engine.database_json.JSONDBEngine.named_directory" title="Permalink to this definition">¶</a></dt>
<dd><p>Return the absolute path of a named directory.</p>
</dd></dl>

<dl class="method">
<dt id="capsul.engine.database_json.JSONDBEngine.path_metadata">
<code class="sig-name descname">path_metadata</code><span class="sig-paren">(</span><em class="sig-param">path</em>, <em class="sig-param">named_directory=None</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/capsul/engine/database_json.html#JSONDBEngine.path_metadata"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#capsul.engine.database_json.JSONDBEngine.path_metadata" title="Permalink to this definition">¶</a></dt>
<dd><p>Retrieve metadata associated with a path.</p>
</dd></dl>

<dl class="method">
<dt id="capsul.engine.database_json.JSONDBEngine.set_json_value">
<code class="sig-name descname">set_json_value</code><span class="sig-paren">(</span><em class="sig-param">name</em>, <em class="sig-param">json_value</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/capsul/engine/database_json.html#JSONDBEngine.set_json_value"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#capsul.engine.database_json.JSONDBEngine.set_json_value" title="Permalink to this definition">¶</a></dt>
<dd><p>Store a json value and associate it with a key given in “name”.
The value can be retrieved with method json_value().</p>
<p>&#64;param name: unique key used to identify and retreive the value
&#64;type name: C{string}
&#64;param json_value: a value to store in the database
&#64;type  name: any JSON compatible value</p>
</dd></dl>

<dl class="method">
<dt id="capsul.engine.database_json.JSONDBEngine.set_named_directory">
<code class="sig-name descname">set_named_directory</code><span class="sig-paren">(</span><em class="sig-param">name</em>, <em class="sig-param">path</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/capsul/engine/database_json.html#JSONDBEngine.set_named_directory"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#capsul.engine.database_json.JSONDBEngine.set_named_directory" title="Permalink to this definition">¶</a></dt>
<dd><p>Associate an absolute path to a generic name. This allow to always
use a location independent name for a directory such as ‘spm_template’
and to customize the real absolute path in the configuration. These
named directories are used when setting/retrieving path metadata with
set_path_metadata() and path_metadata().</p>
</dd></dl>

<dl class="method">
<dt id="capsul.engine.database_json.JSONDBEngine.set_path_metadata">
<code class="sig-name descname">set_path_metadata</code><span class="sig-paren">(</span><em class="sig-param">path</em>, <em class="sig-param">metadata</em>, <em class="sig-param">named_directory=None</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/capsul/engine/database_json.html#JSONDBEngine.set_path_metadata"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#capsul.engine.database_json.JSONDBEngine.set_path_metadata" title="Permalink to this definition">¶</a></dt>
<dd><p>Set metadata associated to a path. The metadata are associated to the
result of self.check_path(path, named_directory). metadata can be any
JSON serializable value.</p>
</dd></dl>

</dd></dl>

</div>
<div class="section" id="module-capsul.engine.database_populse">
<span id="capsul-engine-database-populse-submodule"></span><h2>capsul.engine.database_populse submodule<a class="headerlink" href="#module-capsul.engine.database_populse" title="Permalink to this headline">¶</a></h2>
<dl class="class">
<dt id="capsul.engine.database_populse.PopulseDBEngine">
<em class="property">class </em><code class="sig-prename descclassname">capsul.engine.database_populse.</code><code class="sig-name descname">PopulseDBEngine</code><span class="sig-paren">(</span><em class="sig-param">database_engine</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/capsul/engine/database_populse.html#PopulseDBEngine"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#capsul.engine.database_populse.PopulseDBEngine" title="Permalink to this definition">¶</a></dt>
<dd><dl class="method">
<dt id="capsul.engine.database_populse.PopulseDBEngine.json_value">
<code class="sig-name descname">json_value</code><span class="sig-paren">(</span><em class="sig-param">name</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/capsul/engine/database_populse.html#PopulseDBEngine.json_value"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#capsul.engine.database_populse.PopulseDBEngine.json_value" title="Permalink to this definition">¶</a></dt>
<dd><p>Retrieve a value previously stored with set_json_value()</p>
</dd></dl>

<dl class="method">
<dt id="capsul.engine.database_populse.PopulseDBEngine.named_directories">
<code class="sig-name descname">named_directories</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="../_modules/capsul/engine/database_populse.html#PopulseDBEngine.named_directories"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#capsul.engine.database_populse.PopulseDBEngine.named_directories" title="Permalink to this definition">¶</a></dt>
<dd><p>List the names of all named directories. This method may return any
iterable value (list, generator, etc.)</p>
</dd></dl>

<dl class="method">
<dt id="capsul.engine.database_populse.PopulseDBEngine.named_directory">
<code class="sig-name descname">named_directory</code><span class="sig-paren">(</span><em class="sig-param">name</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/capsul/engine/database_populse.html#PopulseDBEngine.named_directory"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#capsul.engine.database_populse.PopulseDBEngine.named_directory" title="Permalink to this definition">¶</a></dt>
<dd><p>Return the absolute path of a named directory.</p>
</dd></dl>

<dl class="method">
<dt id="capsul.engine.database_populse.PopulseDBEngine.path_metadata">
<code class="sig-name descname">path_metadata</code><span class="sig-paren">(</span><em class="sig-param">path</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/capsul/engine/database_populse.html#PopulseDBEngine.path_metadata"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#capsul.engine.database_populse.PopulseDBEngine.path_metadata" title="Permalink to this definition">¶</a></dt>
<dd><p>Retrieve metadata associated with a path.</p>
</dd></dl>

<dl class="method">
<dt id="capsul.engine.database_populse.PopulseDBEngine.set_json_value">
<code class="sig-name descname">set_json_value</code><span class="sig-paren">(</span><em class="sig-param">name</em>, <em class="sig-param">json_value</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/capsul/engine/database_populse.html#PopulseDBEngine.set_json_value"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#capsul.engine.database_populse.PopulseDBEngine.set_json_value" title="Permalink to this definition">¶</a></dt>
<dd><p>Store a json value and associate it with a key given in “name”.
The value can be retrieved with method json_value().</p>
<p>&#64;param name: unique key used to identify and retreive the value
&#64;type name: C{string}
&#64;param json_value: a value to store in the database
&#64;type  name: any JSON compatible value</p>
</dd></dl>

<dl class="method">
<dt id="capsul.engine.database_populse.PopulseDBEngine.set_named_directory">
<code class="sig-name descname">set_named_directory</code><span class="sig-paren">(</span><em class="sig-param">name</em>, <em class="sig-param">path</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/capsul/engine/database_populse.html#PopulseDBEngine.set_named_directory"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#capsul.engine.database_populse.PopulseDBEngine.set_named_directory" title="Permalink to this definition">¶</a></dt>
<dd><p>Associate an absolute path to a generic name. This allow to always
use a location independent name for a directory such as ‘spm_template’
and to customize the real absolute path in the configuration. These
named directories are used when setting/retrieving path metadata with
set_path_metadata() and path_metadata().</p>
</dd></dl>

<dl class="method">
<dt id="capsul.engine.database_populse.PopulseDBEngine.set_path_metadata">
<code class="sig-name descname">set_path_metadata</code><span class="sig-paren">(</span><em class="sig-param">path</em>, <em class="sig-param">metadata</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/capsul/engine/database_populse.html#PopulseDBEngine.set_path_metadata"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#capsul.engine.database_populse.PopulseDBEngine.set_path_metadata" title="Permalink to this definition">¶</a></dt>
<dd><p>Set metadata associated to a path. The metadata are associated to the
result of self.check_path(path, named_directory). metadata can be any
JSON serializable value.</p>
</dd></dl>

</dd></dl>

</div>
<div class="section" id="module-capsul.engine.database">
<span id="capsul-engine-database-submodule"></span><h2>capsul.engine.database submodule<a class="headerlink" href="#module-capsul.engine.database" title="Permalink to this headline">¶</a></h2>
<dl class="class">
<dt id="capsul.engine.database.DatabaseEngine">
<em class="property">class </em><code class="sig-prename descclassname">capsul.engine.database.</code><code class="sig-name descname">DatabaseEngine</code><a class="reference internal" href="../_modules/capsul/engine/database.html#DatabaseEngine"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#capsul.engine.database.DatabaseEngine" title="Permalink to this definition">¶</a></dt>
<dd><p>A <a class="reference internal" href="#capsul.engine.database.DatabaseEngine" title="capsul.engine.database.DatabaseEngine"><code class="xref py py-class docutils literal notranslate"><span class="pre">DatabaseEngine</span></code></a> is the base class for all engines
allowing to store, retrieve and search metadata associated with
a key that can be either a string or a path (i.e. a file or directory
name).</p>
<p>To instanciate a <a class="reference internal" href="#capsul.engine.database.DatabaseEngine" title="capsul.engine.database.DatabaseEngine"><code class="xref py py-class docutils literal notranslate"><span class="pre">DatabaseEngine</span></code></a> one must use the factory
To date, two concrete <a class="reference internal" href="#capsul.engine.database.DatabaseEngine" title="capsul.engine.database.DatabaseEngine"><code class="xref py py-class docutils literal notranslate"><span class="pre">DatabaseEngine</span></code></a> implementations exist:</p>
<ul class="simple">
<li><p><a class="reference internal" href="#capsul.engine.database_json.JSONDBEngine" title="capsul.engine.database_json.JSONDBEngine"><code class="xref py py-class docutils literal notranslate"><span class="pre">capsul.engine.database_json.JSONDBEngine</span></code></a></p></li>
<li><p><a class="reference internal" href="#capsul.engine.database_populse.PopulseDBEngine" title="capsul.engine.database_populse.PopulseDBEngine"><code class="xref py py-class docutils literal notranslate"><span class="pre">capsul.engine.database_populse.PopulseDBEngine</span></code></a></p></li>
</ul>
<dl class="method">
<dt id="capsul.engine.database.DatabaseEngine.check_path">
<code class="sig-name descname">check_path</code><span class="sig-paren">(</span><em class="sig-param">path</em>, <em class="sig-param">named_directory=None</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/capsul/engine/database.html#DatabaseEngine.check_path"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#capsul.engine.database.DatabaseEngine.check_path" title="Permalink to this definition">¶</a></dt>
<dd><p>Find a pair (named_directory, path) given a path and eventually a
named_directory.</p>
<p>If named_directory is not given, path must be absolute or a
ValueError is raised. Then, either the corresponding named
directory is found or ‘absolute’ is used.</p>
<p>If name_directory is given, the path must be relative (unless
named_directory == ‘absolute’) or begin with the path of the
named directory.</p>
</dd></dl>

<dl class="method">
<dt id="capsul.engine.database.DatabaseEngine.json_value">
<code class="sig-name descname">json_value</code><span class="sig-paren">(</span><em class="sig-param">name</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/capsul/engine/database.html#DatabaseEngine.json_value"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#capsul.engine.database.DatabaseEngine.json_value" title="Permalink to this definition">¶</a></dt>
<dd><p>Retrieve a value previously stored with set_json_value()</p>
</dd></dl>

<dl class="method">
<dt id="capsul.engine.database.DatabaseEngine.named_directories">
<code class="sig-name descname">named_directories</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="../_modules/capsul/engine/database.html#DatabaseEngine.named_directories"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#capsul.engine.database.DatabaseEngine.named_directories" title="Permalink to this definition">¶</a></dt>
<dd><p>List the names of all named directories. This method may return any
iterable value (list, generator, etc.)</p>
</dd></dl>

<dl class="method">
<dt id="capsul.engine.database.DatabaseEngine.named_directory">
<code class="sig-name descname">named_directory</code><span class="sig-paren">(</span><em class="sig-param">name</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/capsul/engine/database.html#DatabaseEngine.named_directory"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#capsul.engine.database.DatabaseEngine.named_directory" title="Permalink to this definition">¶</a></dt>
<dd><p>Return the absolute path of a named directory.</p>
</dd></dl>

<dl class="method">
<dt id="capsul.engine.database.DatabaseEngine.path_metadata">
<code class="sig-name descname">path_metadata</code><span class="sig-paren">(</span><em class="sig-param">path</em>, <em class="sig-param">named_directory=None</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/capsul/engine/database.html#DatabaseEngine.path_metadata"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#capsul.engine.database.DatabaseEngine.path_metadata" title="Permalink to this definition">¶</a></dt>
<dd><p>Retrieve metadata associated with a path.</p>
</dd></dl>

<dl class="method">
<dt id="capsul.engine.database.DatabaseEngine.set_json_value">
<code class="sig-name descname">set_json_value</code><span class="sig-paren">(</span><em class="sig-param">name</em>, <em class="sig-param">json_value</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/capsul/engine/database.html#DatabaseEngine.set_json_value"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#capsul.engine.database.DatabaseEngine.set_json_value" title="Permalink to this definition">¶</a></dt>
<dd><p>Store a json value and associate it with a key given in “name”.
The value can be retrieved with method json_value().</p>
<p>&#64;param name: unique key used to identify and retreive the value
&#64;type name: C{string}
&#64;param json_value: a value to store in the database
&#64;type  name: any JSON compatible value</p>
</dd></dl>

<dl class="method">
<dt id="capsul.engine.database.DatabaseEngine.set_named_directory">
<code class="sig-name descname">set_named_directory</code><span class="sig-paren">(</span><em class="sig-param">name</em>, <em class="sig-param">path</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/capsul/engine/database.html#DatabaseEngine.set_named_directory"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#capsul.engine.database.DatabaseEngine.set_named_directory" title="Permalink to this definition">¶</a></dt>
<dd><p>Associate an absolute path to a generic name. This allow to always
use a location independent name for a directory such as ‘spm_template’
and to customize the real absolute path in the configuration. These
named directories are used when setting/retrieving path metadata with
set_path_metadata() and path_metadata().</p>
</dd></dl>

<dl class="method">
<dt id="capsul.engine.database.DatabaseEngine.set_path_metadata">
<code class="sig-name descname">set_path_metadata</code><span class="sig-paren">(</span><em class="sig-param">path</em>, <em class="sig-param">metadata</em>, <em class="sig-param">named_directory=None</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/capsul/engine/database.html#DatabaseEngine.set_path_metadata"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#capsul.engine.database.DatabaseEngine.set_path_metadata" title="Permalink to this definition">¶</a></dt>
<dd><p>Set metadata associated to a path. The metadata are associated to the
result of self.check_path(path, named_directory). metadata can be any
JSON serializable value.</p>
</dd></dl>

</dd></dl>

</div>
<div class="section" id="module-capsul.engine.module">
<span id="capsul-engine-module-submodule"></span><h2>capsul.engine.module submodule<a class="headerlink" href="#module-capsul.engine.module" title="Permalink to this headline">¶</a></h2>
<span class="target" id="module-capsul.engine.module.attributes"></span><p>Attributes completion config module</p>
<div class="section" id="id1">
<h3>Classes<a class="headerlink" href="#id1" title="Permalink to this headline">¶</a></h3>
<div class="section" id="attributesconfig">
<h4><a class="reference internal" href="#capsul.engine.module.attributes.AttributesConfig" title="capsul.engine.module.attributes.AttributesConfig"><code class="xref py py-class docutils literal notranslate"><span class="pre">AttributesConfig</span></code></a><a class="headerlink" href="#attributesconfig" title="Permalink to this headline">¶</a></h4>
<dl class="class">
<dt id="capsul.engine.module.attributes.AttributesConfig">
<em class="property">class </em><code class="sig-prename descclassname">capsul.engine.module.attributes.</code><code class="sig-name descname">AttributesConfig</code><a class="reference internal" href="../_modules/capsul/engine/module/attributes.html#AttributesConfig"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#capsul.engine.module.attributes.AttributesConfig" title="Permalink to this definition">¶</a></dt>
<dd><p>Attributes-based completion configuration module for
<a class="reference internal" href="#capsul.engine.CapsulEngine" title="capsul.engine.CapsulEngine"><code class="xref py py-class docutils literal notranslate"><span class="pre">CapsulEngine</span></code></a>.</p>
<p>See <a class="reference internal" href="../user_guide_tree/advanced_usage.html#completion"><span class="std std-ref">Parameters completion</span></a> for a more complete documentation about
parameters completion.</p>
<p>This module adds the following options (traits):</p>
<dl class="simple">
<dt>attributes_schema_paths: list(str)</dt><dd><p>attributes shchemas modules names</p>
</dd>
<dt>attributes_schemas: dict(str, str)</dt><dd><p>attributes shchemas names</p>
</dd>
<dt>process_completion: str</dt><dd><p>process completion model name</p>
</dd>
<dt>path_completion: str</dt><dd><p>path completion model name</p>
</dd>
</dl>
<p>Initilaize the Controller class.</p>
<p>During the class initialization create a class attribute
‘_user_traits’ that contains all the class traits and instance traits
defined by user (i.e.  the traits that are not automatically
defined by HasTraits or Controller). We can access this class
parameter with the ‘user_traits’ method.</p>
<p>If user trait parameters are defined directly on derived class, this
procedure call the ‘add_trait’ method in order to not share
user traits between instances.</p>
</dd></dl>

</div>
</div>
<span class="target" id="module-capsul.engine.module.axon"></span><p>Configuration module which links with <a class="reference external" href="http://brainvisa.info/axon/user_doc">Axon</a></p>
<div class="section" id="id2">
<h3>Classes<a class="headerlink" href="#id2" title="Permalink to this headline">¶</a></h3>
<div class="section" id="axonconfig">
<h4><a class="reference internal" href="#capsul.engine.module.axon.AxonConfig" title="capsul.engine.module.axon.AxonConfig"><code class="xref py py-class docutils literal notranslate"><span class="pre">AxonConfig</span></code></a><a class="headerlink" href="#axonconfig" title="Permalink to this headline">¶</a></h4>
<dl class="class">
<dt id="capsul.engine.module.axon.AxonConfig">
<em class="property">class </em><code class="sig-prename descclassname">capsul.engine.module.axon.</code><code class="sig-name descname">AxonConfig</code><span class="sig-paren">(</span><em class="sig-param">*args</em>, <em class="sig-param">**kwargs</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/capsul/engine/module/axon.html#AxonConfig"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#capsul.engine.module.axon.AxonConfig" title="Permalink to this definition">¶</a></dt>
<dd><p>Configuration module allowing to use <a class="reference external" href="http://brainvisa.info/axon/user_doc">Axon</a> shared data in Capsul processes</p>
<p>Configuration variables:</p>
<dl class="simple">
<dt>shared_directory: str</dt><dd><p>directory for Brainvisa software shared data</p>
</dd>
</dl>
<p>Initilaize the Controller class.</p>
<p>During the class initialization create a class attribute
‘_user_traits’ that contains all the class traits and instance traits
defined by user (i.e.  the traits that are not automatically
defined by HasTraits or Controller). We can access this class
parameter with the ‘user_traits’ method.</p>
<p>If user trait parameters are defined directly on derived class, this
procedure call the ‘add_trait’ method in order to not share
user traits between instances.</p>
</dd></dl>

</div>
</div>
<span class="target" id="module-capsul.engine.module.fom"></span><p>Config module for <a class="reference internal" href="attributes.html#module-capsul.attributes.fom_completion_engine" title="capsul.attributes.fom_completion_engine"><code class="xref py py-mod docutils literal notranslate"><span class="pre">File</span> <span class="pre">Organization</span> <span class="pre">models</span> <span class="pre">(FOMs)</span></code></a></p>
<div class="section" id="id4">
<h3>Classes<a class="headerlink" href="#id4" title="Permalink to this headline">¶</a></h3>
<div class="section" id="fomconfig">
<h4><a class="reference internal" href="#capsul.engine.module.fom.FomConfig" title="capsul.engine.module.fom.FomConfig"><code class="xref py py-class docutils literal notranslate"><span class="pre">FomConfig</span></code></a><a class="headerlink" href="#fomconfig" title="Permalink to this headline">¶</a></h4>
<dl class="class">
<dt id="capsul.engine.module.fom.FomConfig">
<em class="property">class </em><code class="sig-prename descclassname">capsul.engine.module.fom.</code><code class="sig-name descname">FomConfig</code><a class="reference internal" href="../_modules/capsul/engine/module/fom.html#FomConfig"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#capsul.engine.module.fom.FomConfig" title="Permalink to this definition">¶</a></dt>
<dd><p>FOM (File Organization Model) configuration module for CapsulEngine</p>
<p>See <a class="reference internal" href="../user_guide_tree/advanced_usage.html#completion"><span class="std std-ref">Parameters completion</span></a> for a more complete documentation about
parameters completion.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p><code class="xref py py-class docutils literal notranslate"><span class="pre">FomConfig</span></code>
needs <code class="xref py py-class docutils literal notranslate"><span class="pre">AxonConfig</span></code>
to be part of
<a class="reference internal" href="#capsul.engine.CapsulEngine" title="capsul.engine.CapsulEngine"><code class="xref py py-class docutils literal notranslate"><span class="pre">CapsulEngine</span></code></a> modules.</p>
</div>
<p>This module adds the following options (traits) in the
<a class="reference internal" href="#capsul.engine.CapsulEngine" title="capsul.engine.CapsulEngine"><code class="xref py py-class docutils literal notranslate"><span class="pre">CapsulEngine</span></code></a> object:</p>
<dl class="simple">
<dt>input_fom: str</dt><dd><p>input FOM</p>
</dd>
<dt>output_fom: str</dt><dd><p>output FOM</p>
</dd>
<dt>shared_fom: str</dt><dd><p>shared data FOM</p>
</dd>
<dt>volumes_format: str</dt><dd><p>Format used for volumes</p>
</dd>
<dt>meshes_format: str</dt><dd><p>Format used for meshes</p>
</dd>
<dt>auto_fom: bool (default: True)</dt><dd><p>Look in all FOMs when a process is not found. Note that auto_fom
looks for the first FOM matching the process to get
completion for, and does not handle ambiguities. Moreover
it brings an overhead (typically 6-7 seconds) the first
time it is used since it has to parse all available FOMs.</p>
</dd>
<dt>fom_path: list of directories</dt><dd><p>list of additional directories where to look for FOMs (in addition to
the standard share/foms)</p>
</dd>
<dt>use: bool</dt><dd><p>Use File Organization Models for file parameters completion’</p>
</dd>
</dl>
<p><em>Methods:</em></p>
<p>Initilaize the Controller class.</p>
<p>During the class initialization create a class attribute
‘_user_traits’ that contains all the class traits and instance traits
defined by user (i.e.  the traits that are not automatically
defined by HasTraits or Controller). We can access this class
parameter with the ‘user_traits’ method.</p>
<p>If user trait parameters are defined directly on derived class, this
procedure call the ‘add_trait’ method in order to not share
user traits between instances.</p>
<dl class="method">
<dt id="capsul.engine.module.fom.FomConfig.update_fom">
<code class="sig-name descname">update_fom</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="../_modules/capsul/engine/module/fom.html#FomConfig.update_fom"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#capsul.engine.module.fom.FomConfig.update_fom" title="Permalink to this definition">¶</a></dt>
<dd><p>Load configured FOMs and create FOM completion data</p>
</dd></dl>

</dd></dl>

</div>
</div>
<span class="target" id="module-capsul.engine.module.fsl"></span><dl class="function">
<dt id="capsul.engine.module.fsl.check_configurations">
<code class="sig-prename descclassname">capsul.engine.module.fsl.</code><code class="sig-name descname">check_configurations</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="../_modules/capsul/engine/module/fsl.html#check_configurations"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#capsul.engine.module.fsl.check_configurations" title="Permalink to this definition">¶</a></dt>
<dd><p>Check if the activated configuration is valid to run FLS and returns an
error message if there is an error or None if everything is good.</p>
</dd></dl>

<dl class="function">
<dt id="capsul.engine.module.fsl.complete_configurations">
<code class="sig-prename descclassname">capsul.engine.module.fsl.</code><code class="sig-name descname">complete_configurations</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="../_modules/capsul/engine/module/fsl.html#complete_configurations"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#capsul.engine.module.fsl.complete_configurations" title="Permalink to this definition">¶</a></dt>
<dd><p>Try to automatically set or complete the capsul.engine.configurations for FSL.</p>
</dd></dl>

<span class="target" id="module-capsul.engine.module.matlab"></span><dl class="function">
<dt id="capsul.engine.module.matlab.check_configurations">
<code class="sig-prename descclassname">capsul.engine.module.matlab.</code><code class="sig-name descname">check_configurations</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="../_modules/capsul/engine/module/matlab.html#check_configurations"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#capsul.engine.module.matlab.check_configurations" title="Permalink to this definition">¶</a></dt>
<dd><p>Check if the activated configuration is valid for Matlaband return
an error message if there is an error or None if everything is good.</p>
</dd></dl>

<span class="target" id="module-capsul.engine.module.spm"></span></div>
</div>


          </div>
        </div>
      </div>
      <div class="sphinxsidebar" role="navigation" aria-label="main navigation">
        <div class="sphinxsidebarwrapper">
  <h3><a href="../index.html">Table of Contents</a></h3>
  <ul>
<li><a class="reference internal" href="#">capsul.engine module</a><ul>
<li><a class="reference internal" href="#module-capsul.engine">Main module</a><ul>
<li><a class="reference internal" href="#classes">Classes</a><ul>
<li><a class="reference internal" href="#capsulengine"><code class="xref py py-class docutils literal notranslate"><span class="pre">CapsulEngine</span></code></a></li>
</ul>
</li>
<li><a class="reference internal" href="#functions">Functions</a><ul>
<li><a class="reference internal" href="#database-factory"><code class="xref py py-func docutils literal notranslate"><span class="pre">database_factory()</span></code></a></li>
<li><a class="reference internal" href="#capsul-engine"><code class="xref py py-func docutils literal notranslate"><span class="pre">capsul_engine()</span></code></a></li>
</ul>
</li>
</ul>
</li>
<li><a class="reference internal" href="#module-capsul.engine.database_json">capsul.engine.database_json submodule</a></li>
<li><a class="reference internal" href="#module-capsul.engine.database_populse">capsul.engine.database_populse submodule</a></li>
<li><a class="reference internal" href="#module-capsul.engine.database">capsul.engine.database submodule</a></li>
<li><a class="reference internal" href="#module-capsul.engine.module">capsul.engine.module submodule</a><ul>
<li><a class="reference internal" href="#id1">Classes</a><ul>
<li><a class="reference internal" href="#attributesconfig"><code class="xref py py-class docutils literal notranslate"><span class="pre">AttributesConfig</span></code></a></li>
</ul>
</li>
<li><a class="reference internal" href="#id2">Classes</a><ul>
<li><a class="reference internal" href="#axonconfig"><code class="xref py py-class docutils literal notranslate"><span class="pre">AxonConfig</span></code></a></li>
</ul>
</li>
<li><a class="reference internal" href="#id4">Classes</a><ul>
<li><a class="reference internal" href="#fomconfig"><code class="xref py py-class docutils literal notranslate"><span class="pre">FomConfig</span></code></a></li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
</ul>

        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="related" role="navigation" aria-label="related navigation">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="../genindex.html" title="General Index"
             >index</a></li>
        <li class="right" >
          <a href="../py-modindex.html" title="Python Module Index"
             >modules</a> |</li>
        <li class="nav-item nav-item-0"><a href="../index.html">CAPSUL</a> &#187;</li> 
      </ul>
    </div>
    <div class="footer" role="contentinfo">
        &#169; Copyright 2019, Populse team &lt;support@brainvisa.info&gt;.
      Created using <a href="http://sphinx-doc.org/">Sphinx</a> 2.2.1.
    </div>
  </body>
</html>